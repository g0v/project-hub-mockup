<html><head><meta charset="utf-8"/><!-- Favicon (TODO)--><link rel="icon" href="assets/img/favicon/favicon.ico" type="image/x-icon"/><link rel="shortcut icon" href="assets/img/favicon/favicon.ico" type="image/x-icon"/><!-- For iOS (TODO)--><meta name="apple-mobile-web-app-capable" content="yes"/><link rel="apple-touch-icon-precomposed" href="assets/img/app-icon/icon-60.png"/><link rel="apple-touch-icon-precomposed" sizes="76x76" href="assets/img/app-icon/icon-76.png"/><link rel="apple-touch-icon-precomposed" sizes="120x120" href="assets/img/app-icon/icon-60@2x.png"/><link rel="apple-touch-icon-precomposed" sizes="152x152" href="assets/img/app-icon/icon-76@2x.png"/><!-- jquery--><script type="text/javascript" src="assets/jquery-2.1.1.min.js"></script><!-- semantic ui--><link rel="stylesheet" type="text/css" href="assets/semantic-ui/0.19.3/css/semantic.min.css"/><script type="text/javascript" src="assets/semantic-ui/0.19.3/javascript/semantic.min.js"></script><!-- handlebars--><script type="text/javascript" src="assets/handlebars-v1.3.0.js"></script><!-- underscore--><script type="text/javascript" src="assets/underscore-min.js"></script><!-- csv parser--><script type="text/javascript" src="assets/csv.js"></script><!-- custom--><link rel="stylesheet" href="css/global.css"/><!-- for mobile, responsive--><meta name="viewport" content="width=device-width, initial-scale=1"/><title>g0v project hub mockup</title></head><body><nav id="sidebar"><div class="ui menu no margin"><div class="ui dropdown item">for Asperger's<i class="icon dropdown"></i><div class="menu"><a class="item">for Asperger's</a><a class="item">for Human</a></div></div><div class="right menu"><div class="ui dropdown icon item"><i class="icon ellipsis vertical"></i><div class="menu"><div class="item"><i class="icon add"></i>Submit a project</div><div class="item"><i class="icon pencil"></i>Edit pending data</div><div class="item"><i class="icon help"></i>About</div></div></div></div></div><div id="search" class="field"><div class="ui icon input"><input placeholder="search..." type="text"/><i class="icon search"></i></div></div><div id="index" class="ui vertical fluid menu no margin"><div id="category" class="ui accordion"><div class="title header item active">category<i class="icon dropdown"></i></div><div class="content ui small menu active"><div class="menu"></div></div></div><div id="type" class="ui accordion"><div class="title header item">type<i class="icon dropdown"></i></div><div class="content ui small menu"><div class="menu"></div></div></div><div id="phase" class="ui accordion"><div class="title header item">phase<i class="icon dropdown"></i></div><div class="content ui small menu"><div class="menu"></div></div></div><div id="license" class="ui accordion"><div class="title header item">license<i class="icon dropdown"></i></div><div class="content ui small menu"><div class="menu"></div></div></div><div id="tool" class="ui accordion"><div class="title header item">tool<i class="icon dropdown"></i></div><div class="content ui small menu"><div class="menu"></div></div></div><div id="tag" class="ui accordion"><div class="title header item">tag<i class="icon dropdown"></i></div><div class="content ui small menu"><div class="menu"></div></div></div></div></nav><section id="projects" class="views"><div id="filter"></div><div id="count"></div><div id="list" class="ui two column stackable grid"></div></section><section id="about" class="views"><div class="ui header align center">g0v.tw Project Pilot</div><div class="ui divider"></div><p class="align center"><a href="https://github.com/g0v/project-hub-mockup" target="_blank">The source code is on github here.<i class="icon forward mail"></i></a></p><p class="align center"><a href="https://github.com/g0v/project-hub-mockup/blob/master/livescripts/projectlist_20141009.json.ls" target="_blank">To complete the data, please edit this .ls file,<i class="icon forward mail"></i></a></p><p class="align center"><a href="https://github.com/g0v/project-hub-mockup/blob/master/public/json/project-list.json" target="_blank">and I will convert it to this .json file.<i class="icon forward mail"></i></a></p><p class="align center"><a href="http://g0v.github.io/project-hub-mockup/public/" target="_blank">And this webpage will be updated after deploying.<i class="icon forward mail"></i></a></p><p class="align center"><a href="https://github.com/g0v/project-hub-mockup/issues" target="_blank">If you are familiar with javascript, please help me with these issues.<i class="icon forward mail"></i></a></p><p class="align center"><a href="https://g0v.hackpad.com/hQ9RdcSw7Gd" target="_blank">For more info, please check out this hackpad<i class="icon forward mail"></i></a></p><p class="align center">We can discuss this project on irc.freenode.net#g0v.tw<br/>(mention ipa, jimyhuang, Lee1092, ETBlue)</p></section><section id="submit" class="views"><div class="ui header align center">Submit a g0v Project</div><div class="ui divider"></div><form class="ui warning form"><div class="ui error message"></div><div class="two fields"><div class="field"><label>專案中文名稱</label><div class="ui input"><input name="name-zh" required="required"/><div class="ui corner label"><i class="icon asterisk"></i></div></div></div><div class="field"><label>Project Name in English</label><div class="ui input"><input name="name-en"/></div></div></div><div class="two fields"><div class="field"><label>專案簡介</label><div class="ui input"><textarea name="intro-zh-short" required="required"></textarea><div class="ui corner label"><i class="icon asterisk"></i></div></div></div><div class="field"><label>Project Summary in English</label><div class="ui input"><textarea name="intro-en-short"></textarea></div></div></div><div class="two fields"><div class="field"><label>授權</label><div class="ui input"><input placeholder="e.g. CC0, MIT" name="license" required="required"/><div class="ui corner label"><i class="icon asterisk"></i></div></div><div class="description">若同時有多種授權，以半形逗號隔開</div></div><div class="field"><label>專案分類</label><div class="ui selection dropdown"><input name="category" type="hidden"/><div class="default text">其他</div><i class="icon dropdown"></i><div class="menu ui transition hidden"><div data-value="開放政府" class="item">開放政府</div><div data-value="開放資料" class="item">開放資料</div><div data-value="社會參與" class="item">社會參與</div><div data-value="政策共筆" class="item">政策共筆</div><div data-value="新媒體" class="item">新媒體</div><div data-value="g0v基礎建設" class="item">g0v基礎建設</div><div data-value="其他" class="item">其他</div></div></div></div></div><div class="ui horizontal divider">現有成果</div><div class="inline fields"><div class="field"><label>網址</label><div class="ui left labeled icon input"><input placeholder="http://" type="url" name="achievement-0-url" required="required"/><i class="icon url"></i><div class="ui corner label"><i class="icon asterisk"></i></div></div></div><div class="field"><label>類型</label><div class="ui selection dropdown"><input name="achievement-0-type" type="hidden"/><div class="default text">website</div><i class="icon dropdown"></i><div class="menu ui transition hidden"><div data-value="web" class="item">website</div><div data-value="android" class="item">Android app</div><div data-value="ios" class="item">iOS app</div><div data-value="wp" class="item">Windows Phone app</div><div data-value="firefoxos" class="item">Firefox OS</div><div data-value="linux" class="item">Linux software</div><div data-value="mac" class="item">Mac software</div><div data-value="windows" class="item">Windows software</div><div data-value="chrome" class="item">Chrome extension</div><div data-value="firefox" class="item">Firefox extension</div><div data-value="safari" class="item">Safari extension</div><div data-value="api" class="item">application interface (api)</div><div data-value="document" class="item">document</div><div data-value="miscmiscellaneous" class="item">miscellaneous</div></div></div></div><div class="field"><label>開發階段</label><div class="ui selection dropdown"><input name="achievement-0-phase" type="hidden"/><div class="default text">idea</div><i class="icon dropdown"></i><div class="menu ui transition hidden"><div data-value="idea" class="item">idea</div><div data-value="plan" class="item">plan</div><div data-value="wireframe" class="item">wireframe</div><div data-value="mockup" class="item">mockup</div><div data-value="prototype" class="item">prototype</div><div data-value="alpha" class="item">alpha</div><div data-value="beta" class="item">beta</div><div data-value="production" class="item">production</div><div data-value="memory" class="item">memory</div><div data-value="miscellaneous" class="item">miscellaneous</div></div></div></div><div class="ui button">新增一筆</div></div><div class="ui horizontal divider">工作區</div><div class="inline fields"><div class="field"><label>網址</label><div class="ui left labeled icon input"><input placeholder="http://" type="url" name="workspace-0-url" required="required"/><i class="icon url"></i><div class="ui corner label"><i class="icon asterisk"></i></div></div></div><div class="field"><label>類型</label><div class="ui selection dropdown"><input name="workspace-0-type" type="hidden"/><div class="default text">github</div><i class="icon dropdown"></i><div class="menu ui transition hidden"><div data-value="hackpad" class="item">hackpad</div><div data-value="hackfoldr" class="item">hackfoldr</div><div data-value="github" class="item">github</div><div data-value="drive" class="item">google drive</div><div data-value="groups" class="item">google groups</div><div data-value="plus" class="item">google plus community</div><div data-value="calendar" class="item">google calendar</div><div data-value="facebook" class="item">facebook group</div><div data-value="irc" class="item">irc channel</div><div data-value="miscellaneous" class="item">miscellaneous</div></div></div></div><div class="ui button">新增一筆</div></div><div class="ui horizontal divider">以下選填</div><div class="field"><label>使用工具</label><div class="ui input"><input name="tool" placeholder="e.g. moqups, illustrator, photoshop, garageband, sass, jade, semantic ui, fire.app, gulp, jquery, underscore js, handlebar js, angular js, react js, rails, django, travis ci, "/></div><div class="description">以半形逗號隔開</div></div><div class="two fields"><div class="field"><label>專案 logo 圖檔網址</label><div class="ui left labeled icon input"><input placeholder="http://" type="url" name="logo"/><i class="icon url"></i></div><div class="description">若不填，會自動以網頁抓圖代替</div></div><div class="field"><label>專案首頁網址</label><div class="ui left labeled icon input"><input placeholder="http://" type="url" name="homepage"/><i class="icon url"></i></div><div class="description">按下專案縮圖後開啟的頁面，若不填，會自動以第一個成果網址代替</div></div></div><div class="two fields"><div class="field"><label>標籤</label><div class="ui input"><input name="tag"/></div><div class="description">以半形逗號隔開</div></div><div class="field"><label>相關專案</label><div class="ui input"><input name="related"/></div><div class="description">以半形逗號隔開</div></div></div><button class="ui submit right icon labeled button green">submit project<i class="icon add"></i></button></form></section><section id="edit" class="views"><iframe id="iframe" src="https://ethercalc.org/g0v-project-hub-mockup"></iframe></section><script>$(document).ready(function(){

  var attribute_template_source ='<a class="item" name="{{attribute_id}}">{{attribute_text}}<div class="ui label">{{count}}</div></a>';
  var attribute_template = Handlebars.compile(attribute_template_source);
  
  var filter_template_source = '<div class="ui label" name="{{attribute_id}}">{{attribute_text}}<i class="icon delete"></i></div>';
  var filter_template = Handlebars.compile(filter_template_source);
  
  var list_template_source ='<article class="column"><div class="wrapper"><a href="{{homepage}}" target="_blank" class="ui image"><img src="{{logo}}"></a><div class="text"><h3 class="ui header">{{name}}</h3><p class="description">{{intro}}</p><p class="achievement"></p></div><div class="hidden text">{{content}}</div></div></article>';
  var list_template = Handlebars.compile(list_template_source);
  
  var label_template_source = '<a href="{{url}}" target="_blank" class="ui label">{{type}} - {{phase}}</a>'
  var label_template = Handlebars.compile(label_template_source);
  
  var menus = {
    category : [],
    type : [],
    phase : [],
    license : [],
    tool : [],
    tag : [],
  };
  //var menus = {
  //  category : ["open government", "open data", "civil participation", "media 2.0", "g0v infrastructure", "policy wiki", "miscellaneous"],
  //  type : ["website", "android app", "ios app", "windows phone app", "linux software", "mac software", "windows software", "chrome extension", "firefox extension", "api", "document", "miscellaneous"],
  //  phase : ["idea", "plan", "wireframe", "mockup", "prototype", "alpha", "beta", "production", "maintenance", "memory", "miscellaneous"],
  //  license : ["CC0", "CC-By", "CC-By-NC", "CC-By-ND", "CC-By-SA", "CC-By-NC-SA", "CC-By-NC-ND", "Apache", "BSD", "GPL", "LGPL", "MIT", "miscellaneous"],
  //  tool : [],
  //  tag : [],
  //};
  
  var render_attributes = function(target_menu_name, attributes){
    $.each(attributes, function(attribute_index, attribute){
      var attribute_id = target_menu_name + "-" + attribute_index;
      var attribute_text = attribute;
      var count = $("#list ." + attribute_id).length; 
      var context = {attribute_id: attribute_id, attribute_text: attribute_text, count: count};
      var $attribute_element = $(attribute_template(context));
      var $filter_element = $(filter_template(context));
      $("#" + target_menu_name + " .content .menu").append($attribute_element);
      $("#filter").append($filter_element);
    });
    var menu_items_count = $("#" + target_menu_name + " .content .menu .item").length;
    $("#" + target_menu_name + " .title").append(" (" + menu_items_count + ")");
  }
  
  var initialize_pilot = function(){
    var active_classes = [];
    var active_classes_string = "";
    var target_attribute = "";
    var all_projects_count = $("#list .column").length;
    var toggle_classes = function(original_classes, target_class){
      if( _.contains( active_classes, target_attribute )){
        active_classes = _.without(active_classes, target_attribute);
      }else{
        active_classes.push(target_attribute);
      };
      active_classes_string = "";
      _.each(active_classes, function(css_class){
        active_classes_string = active_classes_string + "." + css_class;
      });
      $("#list .column").fadeOut();
      $("#list .column" + active_classes_string ).fadeIn();
    };
    var count_projects = function(){
      if(active_classes_string.length > 0){
        $("#count").text("showing " + $("#list").find(active_classes_string).length + " out of " + all_projects_count +" projects");
      }else{
        $("#count").text(all_projects_count + " projects");
      }
    }
    count_projects();
    $("#index").on("click tap", ".item", function(){
      $("#projects").show();
      $("#about, #submit, #edit").fadeOut();
    });
    $("#index").on("click tap", ".content .item", function(){
      $(this).toggleClass("active");
      target_attribute = $(this).attr("name");
      $("#filter .ui.label").filter("[name='" + target_attribute + "']").fadeToggle();
      toggle_classes(active_classes, target_attribute);
      count_projects();
    });
    $("#filter").on("click tap", ".ui.label .delete.icon", function(){
      $(this).parent().fadeOut();
      target_attribute = $(this).parent().attr("name");
      $("#index .content .item").filter("[name='" + target_attribute + "']").removeClass("active");
      toggle_classes(active_classes, target_attribute);
      count_projects();
    });
  };
  
  // get data and then get everything work
  
  $.getJSON("json/project-list.json", function(projects){
  
    $.each(projects, function(project_index, project){
      var homepage = project.homepage;
      var logo = project.logo;
      var name = project.name.zh;
      var intro = project.intro.zh.short;
      var classes = [];
      var content = "";
      
      var add_classes = function(attribute_type){
        $.each(project[attribute_type], function(index, attribute){
          if( !_.contains(menus[attribute_type], attribute)){
            menus[attribute_type].push(attribute);
          }
          var attribute_id = attribute_type + "-" + menus[attribute_type].indexOf(attribute);
          classes.push(attribute_id);
        });
      };
      var add_sub_classes =  function(attribute_type, attribute){
        if( !_.contains(menus[attribute_type], attribute)){
          menus[attribute_type].push(attribute);
        }
        var attribute_id = attribute_type + "-" + menus[attribute_type].indexOf(attribute);
        if( !_.contains(classes, attribute_id) ){
          classes.push(attribute_id);
        };
      };
      
      add_classes("category");
      add_classes("tag");
      add_classes("tool");
      add_classes("license");
      
      if(homepage.length == 0){
        homepage = project.achievement[0].url;
      };
      if(logo.length == 0){
        logo = "http://i.jimmyhub.net/shot/" + homepage;
      };
      var context = {homepage: homepage, logo: logo, name: name, intro: intro, content: content};
      var $list_element = $(list_template(context));
      
      $.each(project.achievement, function(achievement_index, achievement){
        var achievement_type = achievement.type;
        var achievement_phase = achievement.phase;
        var achievement_url = achievement.url;
        var context = {type: achievement_type, phase: achievement_phase, url: achievement_url};
        var $label_element = $(label_template(context));
        $list_element.find(".achievement").append($label_element);
        add_sub_classes("type", achievement_type);
        add_sub_classes("phase", achievement_phase);
      });
      
      $.each(classes, function(class_index, class_name){
        $list_element.addClass(class_name);
      });
      
      $("#list").append($list_element);
    });
  }).done(function(){
    // render sidebar menu
    $.each(menus, function(menu_id, menu_items){
      render_attributes(menu_id, menu_items);
    });
  }).done(function(){
  
    // for semantic ui
    $(".ui.dropdown").dropdown();
    $(".ui.accordion").accordion();
    
    // for ux
    $("#filter .ui.label").fadeOut();
    
    // change views
    $("#sidebar .menu .help").parent(".item").on("click tap", function(){
      $(".views").fadeOut();
      $("#about").fadeIn();
    });
    $("#sidebar .menu .add").parent(".item").on("click tap", function(){
      $(".views").fadeOut();
      $("#submit").fadeIn();
    });
    $("#sidebar .menu .pencil").parent(".item").on("click tap", function(){
      $(".views").fadeOut();
      $("#edit").fadeIn();
    });
    
    // dom manipulation
    initialize_pilot();
    
  }).done(function(){
    // TODO: sort menu items
  });
  
  // TBD
  
  var workspaces = ["hackpad", "hackfoldr", "google drive", "google groups", "google plus community", "facebook community", "irc channel", "github", "google calendar", "facebook group", "miscellaneous"];
  var roles = ["research", "planning", "ui", "visual", "art", "web frontend", "web backend", "ios", "android", "mac", "linux", "windows", "txt", "consult", "miscellaneous"];
  
});</script></body></html>